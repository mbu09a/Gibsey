export const initTRPC = {
  context() {
    return {
      create() {
        return {
          router(obj) {
            return { ...obj, createCaller: () => obj };
          },
          procedure: {
            input(schema) {
              return {
                query(fn) {
                  return async (args) => {
                    const parsed = schema.parse(args);
                    return fn({ input: parsed });
                  };
                },
              };
            },
            query(fn) {
              return async (args) => fn({ input: args });
            },
          },
        };
      },
    };
  },
};
