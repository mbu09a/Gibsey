function createNumber() {
  return {
    parse(value) {
      if (typeof value !== 'number') throw new Error('Expected number');
      return value;
    },
  };
}

function createString() {
  return {
    parse(value) {
      if (typeof value !== 'string') throw new Error('Expected string');
      return value;
    },
  };
}

function createObject(shape) {
  return {
    parse(value) {
      if (typeof value !== 'object' || value === null) throw new Error('Expected object');
      const out = {};
      for (const key in shape) {
        out[key] = shape[key].parse(value[key]);
      }
      return out;
    },
  };
}

export const z = {
  object: (shape) => createObject(shape ?? {}),
  number: createNumber,
  string: createString,
};
